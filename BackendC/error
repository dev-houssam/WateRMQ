In file included from BackLibWaterRMQ.c:4:
/usr/local/include/amqp.h:10:5: error: #warning "amqp.h is deprecated, use rabbitmq-c/amqp.h instead." [-Werror=cpp]
   10 | #   warning "amqp.h is deprecated, use rabbitmq-c/amqp.h instead."
      |     ^~~~~~~
In file included from BackLibWaterRMQ.c:5:
/usr/local/include/amqp_tcp_socket.h:10:5: error: #warning "amqp_tcp_socket.h is deprecated, use rabbitmq-c/tcp_socket.h instead." [-Werror=cpp]
   10 | #   warning "amqp_tcp_socket.h is deprecated, use rabbitmq-c/tcp_socket.h instead."
      |     ^~~~~~~
BackLibWaterRMQ.c:108:17: error: field ‘socket’ has incomplete type
  108 |   amqp_socket_t socket;
      |                 ^~~~~~
BackLibWaterRMQ.c:143:17: error: field ‘st’ has incomplete type
  143 |     struct stat st;
      |                 ^~
BackLibWaterRMQ.c: In function ‘create_WateRMQ_ConfigurationConnection_private’:
BackLibWaterRMQ.c:223:51: error: invalid application of ‘sizeof’ to incomplete type ‘amqp_socket_t’ {aka ‘struct amqp_socket_t_’}
  223 |     cc->socket = (amqp_socket_t * ) malloc(sizeof(amqp_socket_t)); //Only socket must be initialized typically : do not forget this detailled detail !
      |                                                   ^~~~~~~~~~~~~
BackLibWaterRMQ.c: At top level:
BackLibWaterRMQ.c:336:17: error: parameter 8 (‘st’) has incomplete type
  336 |     struct stat st){
      |     ~~~~~~~~~~~~^~
BackLibWaterRMQ.c: In function ‘create_WateRMQ_SemaphoreMmap_private’:
BackLibWaterRMQ.c:368:35: error: ‘SEM_NAME’ undeclared (first use in this function)
  368 |     sm->semaphore_self = sem_open(SEM_NAME, 0);
      |                                   ^~~~~~~~
BackLibWaterRMQ.c:368:35: note: each undeclared identifier is reported only once for each function it appears in
BackLibWaterRMQ.c: In function ‘configurationConnection_WateRMQ_public’:
BackLibWaterRMQ.c:415:7: error: implicit declaration of function ‘die’; did you mean ‘div’? [-Werror=implicit-function-declaration]
  415 |       die("creating TCP socket");
      |       ^~~
      |       div
BackLibWaterRMQ.c:409:20: error: unused variable ‘socket’ [-Werror=unused-variable]
  409 |     amqp_socket_t *socket = NULL;
      |                    ^~~~~~
BackLibWaterRMQ.c: In function ‘configurationLogin_WateRMQ_public’:
BackLibWaterRMQ.c:476:3: error: implicit declaration of function ‘die_on_amqp_error’ [-Werror=implicit-function-declaration]
  476 |   die_on_amqp_error(ret_code, _instance->except->loginExceptionMessage/*"Logging in"*/);
      |   ^~~~~~~~~~~~~~~~~
BackLibWaterRMQ.c: In function ‘retRequestHandling_private’:
BackLibWaterRMQ.c:579:30: error: ‘envelope’ undeclared (first use in this function)
  579 |       amqp_destroy_envelope(&envelope);
      |                              ^~~~~~~~
BackLibWaterRMQ.c: In function ‘sendMessage’:
BackLibWaterRMQ.c:587:47: error: passing argument 1 of ‘addMessageInQueue_private’ from incompatible pointer type [-Werror=incompatible-pointer-types]
  587 |     addMessageInQueue_private(_instance->qmmap->ptr_queue, (const char * ) message);
      |                               ~~~~~~~~~~~~~~~~^~~~~~~~~~~
      |                                               |
      |                                               Queue *
BackLibWaterRMQ.c:483:41: note: expected ‘WateRMQ *’ but argument is of type ‘Queue *’
  483 | int addMessageInQueue_private(WateRMQ * _instance, const char * messageIn){
      |                               ~~~~~~~~~~^~~~~~~~~
BackLibWaterRMQ.c:597:17: error: implicit declaration of function ‘msync’; did you mean ‘sync’? [-Werror=implicit-function-declaration]
  597 |                 msync(_instance->qmmap->ptr_queue, sizeof(Queue), MS_SYNC);
      |                 ^~~~~
      |                 sync
BackLibWaterRMQ.c:597:67: error: ‘MS_SYNC’ undeclared (first use in this function)
  597 |                 msync(_instance->qmmap->ptr_queue, sizeof(Queue), MS_SYNC);
      |                                                                   ^~~~~~~
BackLibWaterRMQ.c: At top level:
BackLibWaterRMQ.c:650:17: error: parameter 9 (‘st’) has incomplete type
  650 |     struct stat st,
      |     ~~~~~~~~~~~~^~
BackLibWaterRMQ.c: In function ‘configurationQueueMmap_private’:
BackLibWaterRMQ.c:657:9: error: ‘fd’ redeclared as different kind of symbol
  657 |     int fd = open(filename, O_RDWR | O_CREAT, S_IRWXU);
      |         ^~
BackLibWaterRMQ.c:648:9: note: previous definition of ‘fd’ with type ‘int’
  648 |     int fd,
      |     ~~~~^~
BackLibWaterRMQ.c:657:14: error: implicit declaration of function ‘open’; did you mean ‘popen’? [-Werror=implicit-function-declaration]
  657 |     int fd = open(filename, O_RDWR | O_CREAT, S_IRWXU);
      |              ^~~~
      |              popen
BackLibWaterRMQ.c:657:29: error: ‘O_RDWR’ undeclared (first use in this function)
  657 |     int fd = open(filename, O_RDWR | O_CREAT, S_IRWXU);
      |                             ^~~~~~
BackLibWaterRMQ.c:657:38: error: ‘O_CREAT’ undeclared (first use in this function)
  657 |     int fd = open(filename, O_RDWR | O_CREAT, S_IRWXU);
      |                                      ^~~~~~~
BackLibWaterRMQ.c:657:47: error: ‘S_IRWXU’ undeclared (first use in this function)
  657 |     int fd = open(filename, O_RDWR | O_CREAT, S_IRWXU);
      |                                               ^~~~~~~
BackLibWaterRMQ.c:660:5: error: implicit declaration of function ‘fstat’ [-Werror=implicit-function-declaration]
  660 |     fstat(fd, &st);
      |     ^~~~~
BackLibWaterRMQ.c:667:47: error: implicit declaration of function ‘mmap’ [-Werror=implicit-function-declaration]
  667 |         _instance->qmmap->ptr_queue = (Queue) mmap(0, sizeof(Queue), PROT_READ|PROT_WRITE, MAP_PRIVATE, fd, 0);
      |                                               ^~~~
BackLibWaterRMQ.c:667:70: error: ‘PROT_READ’ undeclared (first use in this function)
  667 |         _instance->qmmap->ptr_queue = (Queue) mmap(0, sizeof(Queue), PROT_READ|PROT_WRITE, MAP_PRIVATE, fd, 0);
      |                                                                      ^~~~~~~~~
BackLibWaterRMQ.c:667:80: error: ‘PROT_WRITE’ undeclared (first use in this function)
  667 |         _instance->qmmap->ptr_queue = (Queue) mmap(0, sizeof(Queue), PROT_READ|PROT_WRITE, MAP_PRIVATE, fd, 0);
      |                                                                                ^~~~~~~~~~
BackLibWaterRMQ.c:667:92: error: ‘MAP_PRIVATE’ undeclared (first use in this function)
  667 |         _instance->qmmap->ptr_queue = (Queue) mmap(0, sizeof(Queue), PROT_READ|PROT_WRITE, MAP_PRIVATE, fd, 0);
      |                                                                                            ^~~~~~~~~~~
BackLibWaterRMQ.c:659:17: error: unused variable ‘st’ [-Werror=unused-variable]
  659 |     struct stat st;
      |                 ^~
BackLibWaterRMQ.c: In function ‘configurationRabbitMQ_private’:
BackLibWaterRMQ.c:705:45: error: incompatible type for argument 2 of ‘memcpy’
  705 |     memcpy(_instance->conf_exchange->queue, amqp_bytes_malloc_dup(r->queue), sizeof(amqp_bytes_malloc_dup(r->queue)));
      |                                             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
      |                                             |
      |                                             amqp_bytes_t {aka struct amqp_bytes_t_}
In file included from BackLibWaterRMQ.c:8:
/usr/include/string.h:43:70: note: expected ‘const void * restrict’ but argument is of type ‘amqp_bytes_t’ {aka ‘struct amqp_bytes_t_’}
   43 | extern void *memcpy (void *__restrict __dest, const void *__restrict __src,
      |                                               ~~~~~~~~~~~~~~~~~~~~~~~^~~~~
BackLibWaterRMQ.c:714:29: error: incompatible type for argument 3 of ‘amqp_queue_bind’
  714 |     _instance->conf_exchange->queue/*queuename*/,
      |     ~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~
      |                             |
      |                             char *
In file included from /usr/local/include/rabbitmq-c/amqp.h:690,
                 from /usr/local/include/amqp.h:13:
/usr/local/include/rabbitmq-c/framing.h:1006:73: note: expected ‘amqp_bytes_t’ {aka ‘struct amqp_bytes_t_’} but argument is of type ‘char *’
 1006 |     amqp_connection_state_t state, amqp_channel_t channel, amqp_bytes_t queue,
      |                                                            ~~~~~~~~~~~~~^~~~~
BackLibWaterRMQ.c:723:32: error: incompatible type for argument 3 of ‘amqp_basic_consume’
  723 |     1, _instance->conf_exchange->queue,
      |        ~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~
      |                                |
      |                                char *
/usr/local/include/rabbitmq-c/framing.h:1080:73: note: expected ‘amqp_bytes_t’ {aka ‘struct amqp_bytes_t_’} but argument is of type ‘char *’
 1080 |     amqp_connection_state_t state, amqp_channel_t channel, amqp_bytes_t queue,
      |                                                            ~~~~~~~~~~~~~^~~~~
BackLibWaterRMQ.c: In function ‘processArgv’:
BackLibWaterRMQ.c:901:50: error: operation on ‘cpt’ may be undefined [-Werror=sequence-point]
  901 |         printf("%d: %s: INVALID\n", cpt, argv[cpt++]);
      |                                               ~~~^~
BackLibWaterRMQ.c: In function ‘start_consuming_public’:
BackLibWaterRMQ.c:934:12: error: variable ‘st’ has initializer but incomplete type
  934 |     struct stat st = 0;
      |            ^~~~
BackLibWaterRMQ.c:934:17: error: storage size of ‘st’ isn’t known
  934 |     struct stat st = 0;
      |                 ^~
BackLibWaterRMQ.c:940:40: error: cast to pointer from integer of different size [-Werror=int-to-pointer-cast]
  940 |     wrmq_info, "queue.bridge", length, (void *) addr, prot, flags, fd, offset, st, wrmq_info->qmmap->ptr_queue);
      |                                        ^
BackLibWaterRMQ.c:934:17: error: unused variable ‘st’ [-Werror=unused-variable]
  934 |     struct stat st = 0;
      |                 ^~
BackLibWaterRMQ.c: In function ‘main’:
BackLibWaterRMQ.c:981:26: error: expected expression before ‘WateRMQ’
  981 |   start_consuming_public(WateRMQ * wrmq_info);
      |                          ^~~~~~~
cc1: all warnings being treated as errors
